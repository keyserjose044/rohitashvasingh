---
interface TimelineElement {
  time: string
  title?: string
  company?: string
  school?: string
  location?: string
  description?: string
}

const { elements, colored = false } = Astro.props as {
  elements: TimelineElement[]
  colored?: boolean
}

// Helper to pick the main heading text
const getHeading = (el: TimelineElement) =>
  el.title ?? el.company ?? el.school ?? ''
---

<ul class="timeline timeline-vertical w-full">
  {elements.map((el, index) => {
    const heading = getHeading(el)

    return (
      <li>
        {/* Top connector (except for first) */}
        {index !== 0 && <hr />}

        {/* Dot */}
        <div
          class:list={[
            'timeline-middle flex items-center justify-center w-6 h-6 rounded-full text-xs font-semibold',
            colored ? 'bg-secondary text-secondary-content' : 'bg-base-300 text-base-content',
          ]}
        >
          ✓
        </div>

        {/* Content */}
        <div class="timeline-end mb-8">
          {/* Time */}
          {el.time && (
            <p class="text-sm italic mb-1">
              {el.time}
            </p>
          )}

          {/* Title / main heading – this is what was missing for awards */}
          {heading && (
            <h3 class="text-lg font-semibold mb-1">
              {heading}
            </h3>
          )}

          {/* Location */}
          {el.location && (
            <p class="text-sm opacity-80 mb-1">
              {el.location}
            </p>
          )}

          {/* Description */}
          {el.description && (
            <p class="mt-2">
              {el.description}
            </p>
          )}
        </div>

        {/* Bottom connector (except for last) */}
        {index !== elements.length - 1 && <hr />}
      </li>
    )
  })}
</ul>
